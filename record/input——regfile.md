## 流水线？
写端把 3 行数据轮流写入同 160 Byte 的环形缓冲区，而读端对这 3 行的消费始终 比写端早两个 pe_end 周期？
每拍写 8 B，PE 每拍吃 16×8 bit，计算流水永远比写端快两个 pe_end 节拍。
### 时间线（举例：Hu_w = 33，K_H = 3，Stride =2）

| pe_end 周期 | 正在写入的行 | 正在被读的行        | 读写关系                   |
| --------- | ------ | ------------- | ---------------------- |
| **T0** 开始 | row 0  | —             | 只写不读                   |
| T1        | row 0  | row 0         | 同一行，读滞后 1 pe_end       |
| T2        | row 1  | row 0 & row 1 | row 0 最后几列读完后就可被覆盖     |
| T3        | row 2  | row 0/1/2     | 三行齐全，完成第一个 3×3 卷积窗口    |
| T4        | row 3  | row 1/2/3     | row 0 已不再需要，被 row 3 覆盖 |

### 为什么 99 Byte 的一行只写到地址 **0 – 102**？

| 量             | 计算             | 结果   | 解释                                |
| ------------- | -------------- | ---- | --------------------------------- |
| **Hu_w**      | ―              | 33   | 一行实际像素数（33 Byte）                  |
| **BM** (`Bm`) | ―              | 8    | 一次写 8 Byte                        |
| **ROW_BLK**   | ceil( 33 / 8 ) | 5    | 一行被切成 5 个 “8 Byte 列块”             |
| **一行占用地址范围**  | 5 × 8 Byte     | 0–39 | 写端往 Regfile 写 **40 Byte**，足够覆盖 33 |

---

### 写端地址公式

```verilog
wr_addr = Bm_cnt * 8;     // Bm_cnt : 0 … ROW_BLK-1
